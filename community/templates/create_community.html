<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Community</title>
</head>
<body>
    <h1>Create Community</h1>
    <form id="create-community-form">
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title" required><br><br>
        
        <label for="description">Description:</label><br>
        <textarea id="description" name="description"></textarea><br><br>
        
        <label for="categories">Categories (IDs, separated by commas):</label><br>
        <input type="text" id="categories" name="categories" required><br><br>
        
        <label for="habits">Habits (IDs, separated by commas):</label><br>
        <input type="text" id="habits" name="habits" required><br><br>
        
        <button type="button" onclick="createCommunity()">Create</button>
    </form>

    <script>
        function createCommunity() {
            const title = document.getElementById('title').value;
            const description = document.getElementById('description').value;
            const categories = document.getElementById('categories').value.split(',').map(id => parseInt(id.trim()));
            const habits = document.getElementById('habits').value.split(',').map(id => parseInt(id.trim()));

            const data = {
                title: title,
                description: description,
                categories: categories,
                habits: habits
            };

            fetch('http://your-api-url/communities/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer your-token' // اضافه کردن توکن احراز هویت
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Community created successfully!');
                // می‌توانید از اینجا به صفحه دیگری هدایت شوید یا پیامی به کاربر نمایش دهید
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('Error creating community.');
            });
        }
    </script>
</body>
</html>
